!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=(new n.Error).stack;l&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[l]="64440059-a3ce-40b0-b7ad-a687c81396d4",n._sentryDebugIdIdentifier="sentry-dbid-64440059-a3ce-40b0-b7ad-a687c81396d4")}catch(n){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7548],{7548:function(n,l,e){e.d(l,{j:function(){return C}});var a=e(97458),o=e(32748);e(2935),e(41866),e(11875);var t=e(22319),b=(0,t.c)({defaultClassName:"_bglng85 _1286nb12ji _1286nb129i _1286nb1246 _1286nb12e6 _1286nb14l0 _1286nb14mc _1286nb14no _1286nb14p0 _1286nb12s0 _1286nb12oo _1286nb13q6 _1286nb119",variantClassNames:{mode:{follow:"_bglng82 _1286nb16iv _1286nb181m _1286nb187j",following:"_bglng84 _1286nb16iv _1286nb16qj _1286nb181m _1286nb18fa"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),i=(0,t.c)({defaultClassName:"_bglng8e _bglng89 _1286nb119",variantClassNames:{mode:{follow:"_bglng8b _1286nb16iv",following:"_bglng8d _1286nb16iv _1286nb16qj"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),s=(0,t.c)({defaultClassName:"_bglng8m _1286nb12jc _1286nb129c _1286nb1240 _1286nb12e0 _1286nb14gi _1286nb14hi _1286nb14ii _1286nb14ji _1286nb14ku _1286nb14m6 _1286nb14ni _1286nb14ou _1286nb12t0 _1286nb12s0 _1286nb1528 _1286nb119 _1286nb12rc",variantClassNames:{mode:{follow:"_bglng8j _1286nb16w4",following:"_bglng8l _1286nb16w4"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),_="_bglng8p",r=e(96005),c=e(42011),d=e(17417),f=e(7616),u=e(52983);let g=async()=>{let n=await fetch("/api/social/follow");if(!n.ok)throw Error();return await n.json()};var w=e(41843),m=e(24399),h=e(73139);let p=(0,m.cn)([]),v=(0,h.xu)(n=>(0,m.cn)(l=>!!l(w.PQ)&&l(p).includes(n),(l,e,a)=>{e(p,l=>a?l.filter(l=>l!==n):[...l,n])})),y=async(n,l)=>{if(!(await fetch("/api/social/follow?id=".concat(l),{method:n?"DELETE":"PUT"})).ok)throw Error("There was a problem toggling the follow")};var j=e(62168);let N=(n,l)=>{let e=(0,j.PN)(),a={event:"ga4event",event_name:"follow_author",action:"follow_author",author_name:n,location:l,category:"follow-contributor"};return()=>e(a)},k=(n,l,e)=>{let[a,o]=(0,u.useState)(!0),{openToast:t}=(0,d.x_)(),{loginUrl:b,setLoginCookies:i}=(0,r.J)(),s=(0,c.d)(),_=(0,f.b9)(p),[w,m]=(0,f.KO)(v(n)),h=N(l,e);(0,u.useEffect)(()=>{(async()=>{if(!s){_([]);return}let n=async()=>await g();_(await n())})()},[_,s]);let j=(0,u.useCallback)(()=>{if(!s){i(),window.location.href=b;return}o(!1),y(w,n).then(()=>m(w)).then(()=>!w&&h()).catch(()=>t()).finally(()=>o(!0))},[s,w,n,i,b,m,h,t]);return{following:w,disabled:!a,onClick:j}},C=n=>{let{id:l,name:e,location:t,buttonStyle:r="button"}=n,{t:c}=(0,o.$G)("common"),{following:d,onClick:f,disabled:u}=k(l,e,t),g={inline:i,outline:s,button:b};return d?(0,a.jsxs)("button",{className:g[r]({mode:"following"}),onClick:f,disabled:u,children:[(0,a.jsx)("span",{className:_,children:c("following")}),(0,a.jsx)("span",{className:_,children:c("unfollow")})]}):(0,a.jsx)("button",{className:g[r]({mode:"follow"}),onClick:f,disabled:u,children:c("follow")})}}}]);