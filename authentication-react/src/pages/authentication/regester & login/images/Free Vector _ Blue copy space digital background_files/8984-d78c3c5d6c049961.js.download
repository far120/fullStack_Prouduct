!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="6277eb57-ee08-45cb-aeaf-88b4ba27596d",e._sentryDebugIdIdentifier="sentry-dbid-6277eb57-ee08-45cb-aeaf-88b4ba27596d")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8984],{7489:function(e,t,n){n.d(t,{I:function(){return l},N:function(){return i.N}});var r=n(97458),a=n(16830),o=n.n(a),i=n(29646);let u=o()(()=>n.e(6402).then(n.bind(n,36402)).then(e=>e.ConfirmSafariClipboardComponent),{loadableGenerated:{webpack:()=>[36402]},ssr:!1}),l=()=>{let{onSucess:e}=(0,i.N)();return e&&(0,r.jsx)(u,{})}},29646:function(e,t,n){n.d(t,{N:function(){return o}});var r=n(7616);let a=(0,n(24399).cn)(null),o=()=>{let[e,t]=(0,r.KO)(a);return{onClose:()=>t(null),setConfirm:e=>t({onSuccess:e}),onSucess:null==e?void 0:e.onSuccess}}},67310:function(e,t,n){n.d(t,{e:function(){return r}});let r=(0,n(52983).createContext)(null)},7458:function(e,t,n){n.d(t,{S:function(){return p}});var r=n(97458),a=n(83648),o=n(52983),i=n(67310),u=n(7616),l=n(1347),c=n(20534),s=n(69629),d=n(89818);let f=()=>{let{id:e}=(0,s.ph)(),t=(0,u.Dv)((0,d.u)(e)),[n,r]=(0,o.useState)(!1),[a,i]=(0,o.useState)(void 0),[f,m]=(0,o.useState)(void 0),[p,g]=(0,c.iA)(),[w,_]=(0,o.useState)(!1),[b,v]=(0,o.useState)(!1),[h,y]=(0,o.useState)(!1),[k,C]=(0,l.E)({slides:t.length+1,initial:0,loop:!0,defaultAnimation:{duration:300},animationEnded(e){let n=e.track.details.rel;i(null==t?void 0:t[n])},created(){_(!0)}}),S=(0,o.useCallback)(e=>{var n;i(e),null===(n=C.current)||void 0===n||n.moveToIdx(t.findIndex(t=>t.uuid===e.uuid))},[t,C]),I=(0,o.useCallback)(e=>{var t;null===(t=C.current)||void 0===t||t[e]()},[C]);return(0,o.useEffect)(()=>{g(n)},[n,g]),(0,o.useMemo)(()=>({isAIVariationsLoading:n,setIsAIVariationsLoading:r,selectedAIVariation:a,handleSetSelectedAIVariation:S,prompt:f,setPrompt:m,sliderRef:k,sliderNavigation:I,sliderLoaded:w,hasNsfw:b,setHasNsfw:v,forceAIVariationsButtonTooltip:h,setForceAIVariationsButtonTooltip:y,setSelectedAIVariation:i}),[n,a,S,f,k,I,w,b,h])},m=()=>{let[e,t]=(0,c.iA)(),[n,r]=(0,o.useState)(!0),[a,i]=(0,o.useState)(!1),[u,l]=(0,o.useState)(!1),[s,d]=(0,o.useState)(void 0);return(0,o.useEffect)(()=>{t(a)},[a,t]),(0,o.useMemo)(()=>({isRemoveBackgroundLoading:a,setIsRemoveBackgroundLoading:i,removeBackgroundAnimationEnd:n,setRemoveBackgroundAnimationEnd:r,forceRemoveBackgroundButtonTooltip:u,setForceRemoveBackgroundButtonTooltip:l,imageUrl:s,setImageUrl:d}),[u,s,a,n])},p=e=>{var t;let{children:n}=e,{asPath:u}=(0,a.useRouter)(),[l,c]=(0,o.useState)(),[s,d]=(0,o.useState)("original"),[p,g]=(0,o.useState)(void 0),[w,_]=(0,o.useState)(void 0),b=m(),v=f(),{setRemoveBackgroundAnimationEnd:h}=b,y=(0,o.useCallback)(()=>{d("original"),g(void 0),_(void 0)},[]),k=(0,o.useMemo)(()=>({...b,...v,imagePreviewMode:s,setImagePreviewMode:d,editedImageDimensions:l,setEditedImageDimensions:c,isRemoveBackgroundActive:"transparent"===s,isAIVariationsActive:"variations"===s,isExpandActive:"expand"===s,isEditToolsLoading:b.isRemoveBackgroundLoading||v.isAIVariationsLoading,setImageModeToOriginal:y,lastEditedImage:w,lastEditTool:p}),[v,l,s,p,w,b,y]);return(0,o.useEffect)(()=>{d("original"),h(!0)},[u,h]),(0,o.useEffect)(()=>{var e;let t={transparent:b.imageUrl,variations:null===(e=v.selectedAIVariation)||void 0===e?void 0:e.imageUrl};["transparent","variations"].includes(s)&&(_(t[s]),g(s))},[null===(t=v.selectedAIVariation)||void 0===t?void 0:t.imageUrl,s,b.imageUrl]),(0,r.jsx)(i.e.Provider,{value:k,children:n})}},62148:function(e,t,n){n.d(t,{Sq:function(){return r.S},J3:function(){return i},TV:function(){return o.T},ql:function(){return u.q}}),n(67310);var r=n(7458),a=n(52983),o=n(93354);let i=()=>{let{isAIVariationsLoading:e,setIsAIVariationsLoading:t,selectedAIVariation:n,handleSetSelectedAIVariation:r,prompt:i,setPrompt:u,sliderRef:l,sliderLoaded:c,sliderNavigation:s,hasNsfw:d,setHasNsfw:f,forceAIVariationsButtonTooltip:m,setForceAIVariationsButtonTooltip:p}=(0,o.T)();return(0,a.useMemo)(()=>({isAIVariationsLoading:e,setIsAIVariationsLoading:t,selectedAIVariation:n,handleSetSelectedAIVariation:r,prompt:i,setPrompt:u,sliderRef:l,sliderLoaded:c,sliderNavigation:s,hasNsfw:d,setHasNsfw:f,forceAIVariationsButtonTooltip:m,setForceAIVariationsButtonTooltip:p}),[e,t,n,r,i,u,l,c,s,d,f,m,p])};var u=n(53294)},93354:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(52983),a=n(67310);let o=()=>{let e=(0,r.useContext)(a.e);if(null===e)throw Error("useEditToolsState must be used within a DetailEditToolsContext");return e}},53294:function(e,t,n){n.d(t,{q:function(){return o}});var r=n(52983),a=n(93354);let o=()=>{let{isRemoveBackgroundLoading:e,setIsRemoveBackgroundLoading:t,removeBackgroundAnimationEnd:n,setRemoveBackgroundAnimationEnd:o,forceRemoveBackgroundButtonTooltip:i,setForceRemoveBackgroundButtonTooltip:u,isRemoveBackgroundActive:l,imageUrl:c,setImageUrl:s}=(0,a.T)();return(0,r.useMemo)(()=>({isRemoveBackgroundLoading:e,setIsRemoveBackgroundLoading:t,removeBackgroundAnimationEnd:n,setRemoveBackgroundAnimationEnd:o,forceRemoveBackgroundButtonTooltip:i,setForceRemoveBackgroundButtonTooltip:u,isRemoveBackgroundActive:l,imageUrl:c,setImageUrl:s}),[e,t,n,o,i,u,l,c,s])}},89818:function(e,t,n){n.d(t,{u:function(){return i}});var r=n(24399),a=n(73139);let o=(0,r.cn)({}),i=(0,a.xu)(e=>(0,r.cn)(t=>t(o)[e]||[],(t,n,r)=>{n(o,t=>({...t,[e]:r}))}))},85618:function(e,t,n){n.d(t,{C:function(){return i},C0:function(){return b},EQ:function(){return p},H$:function(){return _},OI:function(){return y},PF:function(){return c},RJ:function(){return S},S3:function(){return m},Vj:function(){return g},YT:function(){return h},cj:function(){return d},cm:function(){return l},en:function(){return u},g7:function(){return o},k5:function(){return f},os:function(){return w},p3:function(){return s},s1:function(){return k},u4:function(){return v},zL:function(){return C}});var r=n(15303);let a="".concat(r.p,"/regular-detail/expand"),o="https://www.freepik.com/pikaso/embed",i="https://www.freepik.es/pikaso/embed",u="#from_element=resource_detail",l="download_after_removing_bg",c="copy_after_removing_bg",s="edit_after_removing_bg",d="download_after_reimagine",f="copy_after_reimagine",m="ai_tool_expand",p="ai_tool_retouch",g="ai_tool_reimagine",w="ai_tool_removebg",_="ai_tool_upscaler",b="ai_tool_all",v="ai_tool_all_thumbnail",h="ai_tool_expand_after_download",y="ai_tool_expand_carousel",k=15e3,C=[{transKey:"expandAfterDownload.instagramStory",videoSrc:"".concat(a,"/Expand_Instagram.mp4"),miniVideoSrc:"".concat(a,"/instagram_story_mini_mobile_v2.mp4"),aspectRatio:"9:16",shouldShowInAttribution:!0},{transKey:"expandAfterDownload.facebookPost",videoSrc:"".concat(a,"/Expand_f_post.mp4"),miniVideoSrc:"".concat(a,"/facebook_square_mini_mobile.mp4"),aspectRatio:"1:1",shouldShowInAttribution:!0},{transKey:"expandAfterDownload.facebookCover",videoSrc:"".concat(a,"/Expand_f_wide.mp4"),miniVideoSrc:"".concat(a,"/facebook_cover_mini_mobile.mp4"),aspectRatio:"16:9",shouldShowInAttribution:!0},{transKey:"expandAfterDownload.instagramPost",miniVideoSrc:"".concat(a,"/instagram_post_mini_mobile.mp4"),aspectRatio:"4:5",shouldShowInAttribution:!1},{transKey:"expandAfterDownload.custom",aspectRatio:"custom",shouldShowInAttribution:!0}],S="edit_tools_onboarding"},24418:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(52983),a=n(58025);let o=async(e,t,n)=>{await fetch("/api/ai/log-action",{method:"POST",body:JSON.stringify({action:n,uuid:e,resourceId:t})})},i=()=>{let{id:e}=(0,a.ph)();return(0,r.useCallback)(async(t,n)=>{await o(t,e,n)},[e])}},51900:function(e,t,n){n.d(t,{MF:function(){return o},QC:function(){return i},_R:function(){return r},wj:function(){return a}});let r=2e3,a=15,o=["photo","vector"],i="PNG"},87732:function(e,t,n){n.d(t,{Qc:function(){return s},Ux:function(){return m},pV:function(){return g},A8:function(){return F},CA:function(){return H}});var r=n(7616),a=n(52983),o=n(86806),i=n(24399),u=n(73139);let l=(0,i.cn)({}),c=(0,u.xu)(e=>(0,i.cn)(t=>t(l)[e],(t,n,r)=>{n(l,t=>({...t,[e]:r}))})),s=()=>{let{id:e}=(0,o.p)(),{url:t,uuid:n}=(0,r.Dv)(c(e))||{};return(0,a.useMemo)(()=>({url:t,uuid:n}),[t,n])};var d=n(58025),f=n(51900);let m=()=>{let{type:e}=(0,d.ph)();return f.MF.includes(e)},p=async(e,t)=>{if(!e)return;let n=await fetch("/api/ai/remove-background-check?uuid=".concat(e).concat(t?"&isLastCall=1":""));if(200!==n.status)return null;let{image_url:r}=await n.json();return r},g=()=>{let e=(0,a.useRef)(0),t=(0,a.useRef)();return{pollingBackgroundImageUrl:(0,a.useCallback)(n=>new Promise((r,a)=>{t.current=setInterval(async()=>{if(e.current>=f.wj){a(Error("Failed to remove background"));return}e.current+=1;let t=e.current===f.wj,o=await p(n,t);o&&r(o)},f._R)}).finally(()=>{e.current=0,clearInterval(t.current)}),[])}};var w=n(62168),_=n(69629),b=n(62148),v=n(59398),h=n(45123),y=n(72833),k=n(85043),C=n(83053);let S=()=>{let{setForceRemoveBackgroundButtonTooltip:e,setIsRemoveBackgroundLoading:t}=(0,b.ql)(),n=(0,k.J)(),r=(0,y.L)(),o=(0,h._)(),i=(0,v.E)();return(0,a.useCallback)(async a=>{let u=(0,C.L)(),l=await fetch("/api/ai/remove-background",{method:"POST",body:JSON.stringify({resourceId:a,uuid:u,walletId:r,creditsTransaction:!!(o||r)})});if(429===l.status)return e(!0),t(!1),await n(),null;if(!l.ok)throw Error("Failed to remove background");if(200===l.status){let{transactionId:e,walletId:t}=await l.json();return r||i(t),{uuid:u,transactionId:e}}return{uuid:u}},[i,o,e,t,r,n])};var I=n(17417),T=n(32748);let R=()=>{let{openToast:e}=(0,I.x_)(),{t}=(0,T.$G)("detail"),{setIsRemoveBackgroundLoading:n}=(0,b.ql)();return(0,a.useCallback)(()=>{e({type:"danger",title:t("removeBackground.errorTitle"),message:t("removeBackground.errorMessage"),duration:3e3}),n(!1)},[e,t,n])};var x=n(20256),E=n(85618);let A=(e,t)=>{let n=new Image;n.onload=function(){let e=document.createElement("canvas"),r=e.getContext("2d");if(e.width=n.width,e.height=n.height,!r){t(!1);return}r.drawImage(n,0,0);let a=r.getImageData(0,0,e.width,e.height).data;for(let e=0;e<a.length;e+=4)if(0!==a[e+3]){t(!0);return}t(!1)},n.src=e};var O=n(43815),N=n(65508);let D=()=>(0,a.useCallback)(()=>{(0,N.r)("bb6a004a-8f03-4d2a-88fb-a63499d4591a").then(e=>{e.init(),e.logEvent("remove_bg")})},[]),P=()=>{let{id:e}=(0,_.ph)(),{setIsRemoveBackgroundLoading:t}=(0,b.ql)(),n=(0,r.b9)(c(e)),{setImagePreviewMode:o}=(0,b.TV)();return(0,a.useCallback)((e,r)=>{t(!1),o("transparent"),e&&r&&n({url:e,uuid:r})},[o,t,n])},j=()=>{let e=R(),t=P(),{id:n,premium:r,regularType:o}=(0,_.ph)(),{setImageUrl:i}=(0,b.ql)(),u=(0,x.mS)(),l=D();return(0,a.useCallback)(async(a,c)=>{try{i(a);let s=await (0,O.C)(a);A(s,a=>{if(!a){e();return}t(s,c),u({resourceId:n,isResourcePremium:r,resourceType:o,downloadType:E.os}),l()})}catch(t){e()}},[i,t,u,n,r,o,l,e])},U=()=>{let e=(0,a.useRef)(0),t=(0,a.useRef)(null),n=j(),r=R(),o=(0,k.J)();return(0,a.useCallback)(a=>{t.current=setInterval(async()=>{if(e.current>=f.wj){t.current&&clearInterval(t.current),r();return}e.current+=1;let i=e.current===f.wj,u=await p(a,i);u&&(n(u,a),await o(),t.current&&clearInterval(t.current))},f._R)},[n,r,o])},L=()=>{let{id:e,premium:t,regularType:n,url:r}=(0,_.ph)(),{setIsRemoveBackgroundLoading:o}=(0,b.ql)(),{url:i}=s(),u=R(),l=U(),c=P(),d=(0,w.PN)(),f=S(),{setImageModeToOriginal:m}=(0,b.TV)(),p=(0,a.useCallback)(()=>d({event:"ga4event",event_name:"background_remove",category:n,file_id:e,license:t?"premium":"free",location:"resource_detail",url_link:r}),[e,t,n,r,d]);return(0,a.useCallback)(async()=>{if(o(!0),m(),i){c();return}try{p();let t=await f(e);if(!t){o(!1);return}let{uuid:n}=t;l(n)}catch(e){u()}},[o,m,i,c,p,f,e,l,u])};var M=n(21639),z=n(73725),V=n(55662),q=n(24418);let F=()=>{let{id:e,name:t,author:n,premium:r,regularType:o,isAIGenerated:i,dimensions:{width:u=0,height:l=0}={}}=(0,_.ph)(),{downloadCopyImageToClipboard:c}=(0,z.tS)(),{url:d,uuid:m}=s(),p=(0,q.M)(),g=(0,V.m)(),w=(0,M.TH)({file_extension:f.QC.toLowerCase(),file_name:t,file_id:e,license:r?"premium":"free",resolution:"original",style:"na",author_name:n.name,category:i?"ai_image":o,action:"copy",location:"resource_detail"});return(0,a.useCallback)(()=>{c({url:d,width:u,height:l}),w(),g({resourceId:e,isResourcePremium:r,resourceType:o,downloadType:E.PF}),p(m,E.PF)},[c,l,e,d,p,r,o,w,g,m,u])},H=()=>{let e=L(),{hideAttribution:t}=(0,_.ph)(),{isRemoveBackgroundActive:n,setRemoveBackgroundAnimationEnd:r}=(0,b.ql)(),{setImagePreviewMode:o}=(0,b.TV)();return(0,a.useCallback)(async()=>{r(!1),t(),n?o("original"):await e()},[t,n,e,o,r])}},43815:function(e,t,n){n.d(t,{C:function(){return r}});let r=e=>fetch(e).then(e=>e.blob()).then(e=>new Promise(t=>{let n=new FileReader;n.onload=function(){t(this.result)},n.readAsDataURL(e)}))},3036:function(e,t,n){n.d(t,{f:function(){return i},r:function(){return u}});var r=n(97458),a=n(52983);let o=(0,a.createContext)(null),i=e=>{let{children:t,shouldTrackingLog:n}=e,i=(0,a.useMemo)(()=>({shouldTrackingLog:n}),[n]);return(0,r.jsx)(o.Provider,{value:i,children:t})},u=()=>(0,a.useContext)(o)||{shouldTrackingLog:!0}},3704:function(e,t,n){n.d(t,{H:function(){return a}});let r=e=>{let{resource:t,file:n,option:r,size:a,action:o,walletId:i}=e,u=new URLSearchParams;return u.set("resource","".concat(t)),n&&r?(u.set("file",n),u.set("option","".concat(r))):a&&u.set("size","".concat(a)),o&&u.set("action",o),i&&u.set("walletId",i),u.toString()},a=async e=>{let t=r(e),n=await fetch("/api/regular/download?".concat(t));return n.ok?{success:!0,data:await n.json()}:429===n.status?{success:!1,data:"DOWNLOAD_LIMIT_REACHED",metadata:"/download-limit"}:401===n.status||403===n.status||405===n.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===n.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}}},73725:function(e,t,n){n.d(t,{iJ:function(){return r.i},Zd:function(){return i},tS:function(){return u.t}});var r=n(83741),a=n(85043),o=n(52983);let i=e=>{let{isDownloading:t,handleDownload:n}=(0,r.i)(e),i=(0,a.J)();return{isDownloading:t,onClick:(0,o.useCallback)(async e=>{e.preventDefault();let t=e.currentTarget;if(!t)return;let r=await n();if(!r)return;let a=r.url;r.filename&&(t.download=r.filename,a+="".concat(r.url.includes("?")?"&":"?","filename=").concat(r.filename)),t.href=a,t.click(),i()},[n,i])}};var u=n(78683)},83741:function(e,t,n){n.d(t,{i:function(){return E}});var r=n(37904),a=n(74759),o=n(52983),i=n(21639),u=n(85618),l=n(24418),c=n(87732),s=n(50317),d=n(4439),f=n(95102);let m=(e,t)=>t||("photo"===e?"jpg":"zip");var p=n(69629),g=n(3036),w=n(3704),_=n(32565),b=n(36823),v=n(83272),h=n(72118),y=n(1850),k=n(87065);let C=y.z.enum(["download","copy","edit","prompt","preview","remove_background","remove_background_edit",u.cm,u.PF,u.p3,u.cj,u.k5,u.EQ,u.Vj,u.os,u.S3,u.H$,u.C0,u.u4,u.YT,u.OI]);y.z.object({resource:y.z.coerce.number(),file:k.ru.optional(),option:y.z.coerce.number().optional(),size:y.z.coerce.number().optional(),action:C.optional(),walletId:y.z.string().nullable().optional()}),y.z.object({data:y.z.object({filename:y.z.string(),url:y.z.string(),prompt:y.z.string().optional(),signed_url:y.z.string().optional()})}).transform(e=>{let{data:t}=e;return t}).transform(e=>{let{signed_url:t,...n}=e;return{...n,signedUrl:t}});let S=y.z.array(y.z.string()),I=new Date(new Date().getTime()+48e4),T=h.Z.withConverter({write:e=>e}),R=e=>{try{let t=T.get(e);if(!t)return[];return S.parse(JSON.parse(t))}catch(e){return[]}},x=()=>{let e=(0,v.I)(),t=(0,b.b)();return(0,o.useCallback)(n=>{if(!e)return;let r="".concat("ck_items_").concat(e),a=R(r),o="".concat(n);if(!a.includes(o)){let e=JSON.stringify([...a,o]);T.set(r,e,{path:"/",domain:t,expires:I})}},[e,t])},E=e=>{let{resource:t,file:n,action:b="download",location:v="resource_detail",option:h,size:y,showAttributionModal:k=!0}=e,{id:C,name:S,author:I,premium:T,regularType:R,isAIGenerated:E,url:A}=t,[O,N]=(0,o.useState)(!1),{isUserWinback:D,showWinbackModal:P}=(0,s.lK)(),{showAttribution:j}=(0,p.tc)(),U=x(),L=(0,_.b)(),M=(0,d.mS)(),{shouldTrackingLog:z}=(0,g.r)(),{showDeviceBlockedModal:V,isDeviceBlocked:q}=(0,a.qx)(),F=(0,l.M)(),{uuid:H}=(0,c.Qc)(),J=(0,r.Lh)(),K=b===u.p3,W=(0,i.TH)({file_extension:m(R,n),file_name:S,file_id:C,license:T?"premium":"free",resolution:y?f.w8[y]:"original",style:"na",author_name:I.name,category:E?"ai_image":R,action:"prompt"===b?"view_prompt":b,location:v,url_link:A});return{handleDownload:(0,o.useCallback)(async e=>{if(q){V();return}if(D){P();return}N(!0);let t=await (0,w.H)({resource:C,size:y?2e3:void 0,action:K?"edit":b,file:n,option:h,walletId:J});if(t.success)return k&&j&&j(),N(!1),U(C),z&&(M({resourceId:C,isResourcePremium:T,resourceType:R,downloadType:b}),K&&F(H,b)),W({externalUrl:null!=e?e:A}),t.data;"prompt"!==b&&L(t),N(!1)},[q,D,C,y,K,b,n,h,J,V,P,k,j,U,z,W,A,M,T,R,F,H,L]),isDownloading:O}}},32565:function(e,t,n){n.d(t,{b:function(){return i}});var r=n(17417),a=n(32748),o=n(52983);let i=()=>{let{t:e}=(0,a.$G)("error"),{openToast:t}=(0,r.x_)();return(0,o.useCallback)(n=>{if("DOWNLOAD_LIMIT_REACHED"===n.data&&"metadata"in n){window.location.href=n.metadata;return}if("AUTHENTICATION_ERROR"===n.data){window.location.href="/oauth-logout";return}"NOT_FOUND"===n.data&&t({type:"danger",message:e("notFound")}),"UNKNOWN_ERROR"===n.data&&t({type:"danger",message:e("unknown")})},[t,e])}},78683:function(e,t,n){n.d(t,{t:function(){return d}});var r=n(59190),a=n(59813),o=n(14409),i=n(17417),u=n(32748),l=n(52983),c=n(7489);let s=(e,t)=>{let n=document.createElement("a");t&&(n.download=t),n.href=e,n.click(),setTimeout(function(){n.remove()},200)},d=()=>{let{t:e}=(0,u.$G)(["detail","common"]),[t,n]=(0,l.useState)(!1),{openToast:d}=(0,i.x_)(),{setConfirm:f}=(0,c.N)(),m=(0,l.useCallback)(async t=>{try{(0,o.C)()||d({type:"danger",message:e("clipboardNotSupported")}),n(!0),await navigator.clipboard.write([t]),d({type:"success",title:e("detail:copyImageClipboard"),message:e("common:copiedsuccessfully"),testId:"notification-copied-successfully"})}catch(e){d()}finally{n(!1)}},[d,e]),p=(0,l.useCallback)(async(e,t,n,o,i,u)=>{let l="clipboard"===o,c=l?e.naturalWidth:t,d=l?e.naturalHeight:n,p=document.createElement("canvas");p.width=c,p.height=d;let g=p.getContext("2d");g&&(g.drawImage(e,0,0,c,d),p.toBlob(async e=>{let t;if(e){if(l){if((0,a.gn)()||r.G6){t=new ClipboardItem({[e.type]:Promise.resolve(e)}),f(()=>{m(t)});return}m(t=new ClipboardItem({[e.type]:e}))}else{let t=window.URL.createObjectURL(e);s(t,u),window.URL.revokeObjectURL(t)}}},"image/".concat(i),1))},[m,f]);return{downloadImageSize:(0,l.useCallback)(async e=>{let{url:t,filename:n,width:r,height:a}=e;try{let e=new Image;e.src=t,e.crossOrigin="Anonymous",e.onload=()=>{p(e,r,a,"download","jpeg",n)},e.onerror=()=>d()}catch(e){d()}},[p,d]),downloadCopyImageToClipboard:(0,l.useCallback)(async e=>{let{url:t,width:r,height:a}=e;try{n(!0);let e=new Image;e.src=t,e.crossOrigin="Anonymous",e.onload=()=>{p(e,r,a,"clipboard","png")},e.onerror=()=>{n(!1),d()}}catch(e){n(!1),d()}},[d,p]),isCopying:t}}},59813:function(e,t,n){n.d(t,{gn:function(){return i},eE:function(){return o},Xe:function(){return u}});let r=()=>{if("undefined"==typeof navigator)return"Unknown";let e=navigator.userAgent,t=navigator.platform,n={MacOS:["Macintosh","MacIntel","MacPPC","Mac68K"].includes(t),iOS:["iPhone","iPad","iPod"].includes(t),Windows:["Win32","Win64","Windows","WinCE"].includes(t),Android:/Android/.test(e),Linux:/Linux/.test(t),Unknown:!0};return Object.keys(n).find(e=>n[e])||"Unknown"},a=r(),o=()=>"MacOS"===a,i=()=>"iOS"===a,u=()=>i()||"Android"===r()},14409:function(e,t,n){n.d(t,{C:function(){return r}});let r=()=>!!window.navigator.clipboard&&!!window.navigator.clipboard.write}}]);